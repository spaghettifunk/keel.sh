(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{194:function(a,t,e){"use strict";e.r(t);var s=e(3),n=Object(s.a)({},function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[e("img",{attrs:{src:"/img/keel_high_level.png",alt:"Keel high level diagram"}})]),a._v(" "),e("h2",{attrs:{id:"easy-as-1-2-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#easy-as-1-2-3","aria-hidden":"true"}},[a._v("#")]),a._v(" Easy as 1, 2, 3")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("Deploy Keel into your cluster, installation instructions can be found "),e("router-link",{attrs:{to:"/docs/#installation"}},[a._v("here")]),a._v(".")],1)]),a._v(" "),e("li",[e("p",[a._v("Modify your deployment manifest with policy annotations:")])])]),a._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" extensions/v1beta1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Deployment\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" \n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" wd\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("namespace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" default\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("labels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" \n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"wd"')]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("annotations")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("keel.sh/policy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" minor "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# <-- policy name according to https://semver.org/")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("keel.sh/trigger")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" poll "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# <-- actively query registry, otherwise defaults to webhooks")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" wd\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("labels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" wd        \n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("containers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("                    \n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" karolisr/webhook"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v("demo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("0.0.8\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("imagePullPolicy")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Always            \n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" wd\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/bin/webhook-demo"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("containerPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("8090")]),a._v("\n")])])]),e("blockquote",[e("p",[a._v("Additional policies such as wildcard, regex and force are available, read more "),e("router-link",{attrs:{to:"/docs/#policies"}},[a._v("here")]),a._v(".")],1)]),a._v(" "),e("p",[a._v("That's it, third step is automated, Keel will do it. Once you deploy it, Keel will be looking for new versions and automatically updating your resource once a new image is available.")]),a._v(" "),e("h2",{attrs:{id:"admin-dashboard-only-available-with-latest-image"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#admin-dashboard-only-available-with-latest-image","aria-hidden":"true"}},[a._v("#")]),a._v(" Admin Dashboard (only available with 'latest' image)")]),a._v(" "),e("p",[a._v("Keel has an optional, easy to use web UI for quick policy updates, approval management and audit logs:")]),a._v(" "),e("p",[e("img",{attrs:{src:"/img/keel_ui.png",alt:"Keel Web UI"}})]),a._v(" "),e("p",[a._v("See how to enable "),e("router-link",{attrs:{to:"/docs/#enabling-admin-dashboard"}},[a._v("admin dashboard here")]),a._v(".")],1),a._v(" "),e("h2",{attrs:{id:"policy-driven-updates"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#policy-driven-updates","aria-hidden":"true"}},[a._v("#")]),a._v(" Policy Driven Updates")]),a._v(" "),e("p",[a._v("Use policies to define when you want your application to be updated. Providers can have different mechanisms of getting configuration for your application, but policies are consistent across all of them. Following "),e("a",{attrs:{href:"http://semver.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("semver.org"),e("OutboundLink")],1),a._v("\nbest practices allows you to safely automate application updates.")]),a._v(" "),e("p",[a._v("Available policies:")]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("all")]),a._v(": update whenever there is a version bump or a new prerelease created (ie: "),e("code",[a._v("1.0.0")]),a._v(" -> "),e("code",[a._v("1.0.1-rc1")]),a._v(")")]),a._v(" "),e("li",[e("strong",[a._v("major")]),a._v(": update major & minor & patch versions")]),a._v(" "),e("li",[e("strong",[a._v("minor")]),a._v(": update only minor & patch versions (ignores major)")]),a._v(" "),e("li",[e("strong",[a._v("patch")]),a._v(": update only patch versions (ignores minor and major versions)")]),a._v(" "),e("li",[e("strong",[a._v("force")]),a._v(": force update even if tag is not semver, ie: "),e("code",[a._v("latest")]),a._v(", optional label: "),e("strong",[a._v("keel.sh/match-tag=true")]),a._v(" which will enforce that only the same tag will trigger force update.")]),a._v(" "),e("li",[e("strong",[a._v("glob")]),a._v(": use wildcards to match versions, example:")])]),a._v(" "),e("p",[a._v("Policy configuration docs can be "),e("router-link",{attrs:{to:"/docs/#policies"}},[a._v("viewed here")]),a._v(".")],1),a._v(" "),e("h2",{attrs:{id:"approvals"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#approvals","aria-hidden":"true"}},[a._v("#")]),a._v(" Approvals")]),a._v(" "),e("p",[a._v("Users can specify on their Kubernetes manifests or Helm charts how many approvals do they have to collect before a resource gets updated. Approvals can be collected through the web admin dashboard, HTTP API, Slack and HipChat. Read more about approvals "),e("router-link",{attrs:{to:"/docs/#approvals"}},[a._v("in the docs")]),a._v(".")],1),a._v(" "),e("h2",{attrs:{id:"keel-friends"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#keel-friends","aria-hidden":"true"}},[a._v("#")]),a._v(" Keel Friends")]),a._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://webhookrelay.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("Webhook Relay"),e("OutboundLink")],1),a._v(" allows Keel to receive webhooks and connect to admin dashboard without configuring public IP/domains.")]),a._v(" "),e("li",[e("a",{attrs:{href:"https://about.sunstone.dev/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Sunstone"),e("OutboundLink")],1),a._v(" allows users to always deploy latest "),e("strong",[a._v("semver")]),a._v(" tags without continuously updating your docs and deployment yamls.")])])])},[],!1,null,null,null);t.default=n.exports}}]);